GitHub Copilot

아래는 현재 워크스페이스(c:\Digital_Scents\digitalscent-kiosk)의 소스 구조와 각 폴더/주요 파일의 역할, 전체 동작 흐름을 간단명료하게 정리한 내용입니다.

개요 요약

- 이 프로젝트는 Electron + React(TypeScript) 기반의 Kiosk UI 앱으로 보입니다.
- Electron의 세 프로세스 구조(메인, 프리로드, 렌더러)가 그대로 반영되어 있음.
- UI는 React 컴포넌트 구조(components/)와 페이지 단위(pages/)로 구성되어 있고, 트래킹/세션 로직과 스타일 자산이 포함되어 있음.
- resources 폴더는 현재 비어있음(첨부된 구조상 비어있음).

루트 주요 디렉터리

- src/
    - main/ — Electron main process 코드
        - index.ts: 앱 시작 지점. BrowserWindow 생성, 앱 생명주기 관리, (파일/포트/IPC) 설정 담당.
    - preload/ — Preload 스크립트 (Renderer와 Main 간 안전한 브리지)
        - index.ts: contextBridge로 노출할 API 정의(IPC 래핑 등).
        - index.d.ts: preload에서 노출되는 타입 선언(전역 타입 확장).
    - renderer/ — React 기반 UI 애플리케이션
        - index.html: React 앱을 로드하는 HTML 템플릿(브라우저 창에 로드).
        - public/: 정적 리소스(헤더/리디렉션 규칙 등).
        - src/:
            - main.tsx: React 진입점(ReactDOM.render / createRoot).
            - App.tsx: 앱의 루트 레이아웃, 라우팅 또는 페이지 스위칭 담당.
            - env.d.ts: 환경변수/글로벌 타입 선언.
            - assets/: CSS와 폰트 등 스타일 자원 (base.css, main.css, fonts.css 등).
            - components/: 재사용 가능한 UI 컴포넌트와 도메인별 컴포넌트
                - ui/: 기본 버튼, 토글, 세그먼트 컨트롤, 아바타 등 UI primitives (예: Button.tsx).
                - gesture-radial/: 제스처 기반 라디얼 컨트롤 관련 구현(상수, 훅, 유틸).
                - custom-experience/: “사용자 맞춤 경험” 흐름의 여러 선택/단계 컴포넌트(카드 선택, 색상, 이미지, 톤 조정 등). 여러 단계(IntroScreen, StepContainer, NavigationButtons 등)로 구성.
                - svg/: 재사용 가능한 SVG 컴포넌트(PerfumeBottleSVG.tsx 등).
                - 기타: MenuButton, Versions 등.
            - config/
                - viewport.ts: 뷰포트 또는 레이아웃 관련 설정(반응형/화면 크기 관련).
            - pages/: 라우터 단위의 페이지 컴포넌트
                - Home.tsx, CustomExperience.tsx, CustomResults.tsx, QuickExperience.tsx, TrendExperience.tsx 등 — 사용자 흐름별 화면.
            - tracking/: 트래킹/분석 관련 로직
                - mixpanel.ts: Mixpanel 연동 구현
                - session.ts: 세션 관리 로직
                - hooks.ts, index.ts, constants.ts, examples.ts, README.md: 트래킹 훅, 상수, 예제 등

동작 흐름 (간단)

1. Electron main (src/main/index.ts)에서 앱 시작 → BrowserWindow 생성 → index.html 로드.
2. preload/index.ts가 preload script로 로드되어 renderer에 노출할 안전한 IPC/API를 세팅.
3. 렌더러(index.html → src/main.tsx)에서 React 앱이 초기화되고 App.tsx가 마운트됨.
4. App은 라우팅/상태에 따라 pages/* 컴포넌트를 렌더링.
5. 각 페이지는 components/*의 UI/도메인 컴포넌트를 조합해 화면을 구성. custom-experience 하위의 여러 컴포넌트가 UI 흐름(여러 단계) 담당.
6. 트래킹 로직(tracking/*)은 사용자 행동을 수집해 mixpanel 등 외부 분석으로 전송. 세션 관리는 session.ts에서 처리.
7. CSS/폰트는 assets/에서 전역으로 로드되어 UI 스타일을 제어.

추가로 확인하면 좋은 파일/지점(디버깅/확장에 유용)

- src/main/index.ts: BrowserWindow 옵션(크기, preload 경로, nodeIntegration 등)과 파일 로드 경로 확인.
- preload/index.ts: renderer에서 호출 가능한 API 목록, IPC 채널 이름.
- renderer/src/main.tsx와 App.tsx: React 루트 마운트 및 라우팅 구조(react-router 사용 여부).
- tracking/mixpanel.ts 및 tracking/session.ts: 트래킹 초기화 시점과 키/환경변수 의존성(Mixpanel 토큰 등).
- config/viewport.ts: 뷰포트 상수나 디바이스 관련 분기 확인.
- public/ 및 resources/: 정적파일이나 런타임에 필요한 리소스 존재 여부. 현재 resources 폴더는 비어 있으므로 배포 시 필요한 자원이 누락되었는지 확인 필요.

문제가 발생했을 때 빠른 점검 포인트

- 터미널에서 dev/build 실행 시 나오는 첫 에러 스택(어떤 파일/모듈을 찾지 못하는지)을 확인.
- preload와 main에서 사용하는 경로(특히 상대경로)가 빌드 환경에서 올바른지 확인.
- resources가 비어 있어야 할 파일(예: 로컬 컨텐츠 JSON, 리소스 번들 등)이 누락된 것인지 체크.
- tracking 또는 환경변수에 의존하는 초기화 코드가 실패하는 경우가 종종 있음(MIXPANEL_TOKEN 등).

원하면:

- 특정 파일(예: src/main/index.ts, preload/index.ts, renderer/src/main.tsx 등)을 열어 분석/요약해 줄게요.
- 또는 dev/build 에러 로그(처음 20줄)를 붙여주면 원인 분석을 바로 시작하겠습니다.