
---

## MODBUS 송신 패킷 해석

## 1. `send[ 8] = 01 04 0F A0 00 04 F2 FF`

- **01** : 슬레이브 ID (장치 주소, 일반적으로 1 = 메인보드)
    
- **04** : function code (0x04, Read Input Registers; 입력 레지스터 읽기 명령)[kuwhawha.tistory+2](https://kuwhawha.tistory.com/286)
    
- **0F A0** : 시작 레지스터 주소 (0x0FA0, 즉 firmware version 주소)
    
- **00 04** : 읽을 레지스터 개수 (4 word)
    
- **F2 FF** : CRC (체크섬)
    

## 의미

- 메인보드의 펌웨어 버전 정보를 4개 레지스터(총 8바이트)만큼 읽으라는 명령을 전송한 것.
    

---

## 2. `send[ 8] = 01 04 0F BD 00 01 A2 FA`

- **01** : 슬레이브 ID
    
- **04** : function code (Read Input Registers)
    
- **0F BD** : 시작 주소 (0x0FBD, NF_NSB/MFC_NSB) → 솔레노이드 보드 개수 읽는 레지스터ControlPumpNF.h+1
    
- **00 01** : 1 word(2바이트) 읽기
    
- **A2 FA** : CRC
    

## 의미

- 연결된 솔레노이드 보드 개수를 1 word(2바이트)만큼 읽으라는 명령을 보낸 것.
    

---

## 3. `nbr of sol. board = 0`

- 방금 위 명령(0x0FBD) 읽기 요청에 대한 응답이 "없음"(read = ), 혹은 0으로 해석됨.
    
- 즉 **현재 연결된 솔레노이드 보드가 감지되지 않거나 0개로 인식**된 상태.
    

---

## 4. `send[ 8] = 01 04 0F BF 00 01 03 3A`

- **01** : 슬레이브 ID
    
- **04** : function code (Read Input Registers)
    
- **0F BF** : 시작 주소 (0x0FBF) → carrier gas pressure 등, 압력 센서 값 읽는 레지스터ControlPumpMFC.h+1
    
- **00 01** : 1 word 읽기
    
- **03 3A** : CRC
    
- 이 이하의 반복은 동일 주소, 레지스터 수로 연속적으로 압력 관련 센서 값을 읽으려는 시도임.
    

---

## 전체 로그 분석 및 의미

- PC 프로그램이 시리얼 연결 후, **메인보드, 솔레노이드 보드, 압력 센서 상태 등 기본 정보를 계속 polling**(조회)하는 루프가 동작 중.
    
- 각 패킷은 MODBUS RTU 규격에 맞춘 "입력 레지스터 읽기(write)" 명령이며,  
    슬레이브(board)가 연결돼 있다면 read에 응답 데이터가 채워졌을 것.
    
- "**nbr of sol. board = 0**"은 **솔레노이드 보드가 인식되지 않음**; 보드 미연결 상태이거나 전원이 꺼져 있을 때 발생.
    

---

## 결론

- 각각의 send 로그는
    
    - 0x0FA0: 펌웨어 버전 읽기
        
    - 0x0FBD: 솔레노이드 보드 개수 읽기
        
    - 0x0FBF: 캐리어가스 압력 등 센서값 읽기
        
- read 값이 비어 있고, "nbr of sol. board = 0"이 뜨는 것은 **장치 연결 혹은 응답 없음(보드가 연결되지 않았음/미동작)**을 의미합니다.
    

궁금한 send/레지스터 주소, polling 주기, 정상 연결 시 응답 예시 등 추가 설명이 필요하면 언제든 알려 주세요!

1. [https://kuwhawha.tistory.com/286](https://kuwhawha.tistory.com/286)
2. [https://www.lorric.com/kr/Articles/flowmeter-technology/ultrasonic-flowmeter/modbus-rtu](https://www.lorric.com/kr/Articles/flowmeter-technology/ultrasonic-flowmeter/modbus-rtu)
3. [https://narup.tistory.com/164](https://narup.tistory.com/164)
4. [https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/72041696/d58a4d75-b0b2-41d9-b35e-10d496144510/ControlPumpNF.h](https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/72041696/d58a4d75-b0b2-41d9-b35e-10d496144510/ControlPumpNF.h)
5. [https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/72041696/d548b631-55d6-491e-ab57-4419dc78cd9d/ControlPumpMFC.h](https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/72041696/d548b631-55d6-491e-ab57-4419dc78cd9d/ControlPumpMFC.h)
6. [https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/72041696/66634ce8-c1f4-4431-91bb-5a76cb668532/ControlPumpNF.c](https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/72041696/66634ce8-c1f4-4431-91bb-5a76cb668532/ControlPumpNF.c)
7. [https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/72041696/45ee907a-cb21-4f70-b16f-7b7680a3cf9d/ControlPumpMFC.c](https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/72041696/45ee907a-cb21-4f70-b16f-7b7680a3cf9d/ControlPumpMFC.c)
8. [https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/images/72041696/452060c7-714d-4d18-9200-0f0f07eb7fda/seukeurinsyas-2025-08-13-093055.jpg](https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/images/72041696/452060c7-714d-4d18-9200-0f0f07eb7fda/seukeurinsyas-2025-08-13-093055.jpg)
9. [https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/72041696/e9851302-f6cc-4813-9436-999ace8ca1c5/ConfigCom.cfg](https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/72041696/e9851302-f6cc-4813-9436-999ace8ca1c5/ConfigCom.cfg)
10. [https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/72041696/2c2cd960-faac-4b77-9608-a9da61c6678e/ConfigProVal.cfg](https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/72041696/2c2cd960-faac-4b77-9608-a9da61c6678e/ConfigProVal.cfg)
11. [https://www.sollae.co.kr/ko/download/pds_files/an_modbus_tcp_ko.pdf](https://www.sollae.co.kr/ko/download/pds_files/an_modbus_tcp_ko.pdf)
12. [http://comfilewiki.co.kr/ko/doku.php?id=tcpport%3Afuntion_code%EB%B3%84_data_%EA%B5%AC%EC%A1%B0_%EB%B0%8F_%EB%94%94%EB%B0%94%EC%9D%B4%EC%8A%A4_%EC%A0%9C%EC%96%B4%3Aindex](http://comfilewiki.co.kr/ko/doku.php?id=tcpport%3Afuntion_code%EB%B3%84_data_%EA%B5%AC%EC%A1%B0_%EB%B0%8F_%EB%94%94%EB%B0%94%EC%9D%B4%EC%8A%A4_%EC%A0%9C%EC%96%B4%3Aindex)
13. [https://blaxsior-repository.tistory.com/273](https://blaxsior-repository.tistory.com/273)
14. [http://www.koreadigital.com/pages/sensecube/pdf/(DOC)_KCD-PE300_COMMUNICATION_PROTOCOL_E2.pdf](http://www.koreadigital.com/pages/sensecube/pdf/\(DOC\)_KCD-PE300_COMMUNICATION_PROTOCOL_E2.pdf)
15. [https://www.modbustools.com/modbus.html](https://www.modbustools.com/modbus.html)
16. [http://portal.doorenet.co.kr/builder/users_dir/ENSCON_TEXT/board/down/B_ENSCON_TEXT_BOOKS/files/SI-1500%20%ED%86%B5%EC%8B%A0%20%EC%82%AC%EC%9A%A9%EC%84%A4%EB%AA%85%EC%84%9C.pdf](http://portal.doorenet.co.kr/builder/users_dir/ENSCON_TEXT/board/down/B_ENSCON_TEXT_BOOKS/files/SI-1500%20%ED%86%B5%EC%8B%A0%20%EC%82%AC%EC%9A%A9%EC%84%A4%EB%AA%85%EC%84%9C.pdf)
17. [http://www.realsys.co.kr/board/content.asp?board=lecture&uid=339&board_group=0¶ms=page%3D](http://www.realsys.co.kr/board/content.asp?board=lecture&uid=339&board_group=0&params=page%3D)