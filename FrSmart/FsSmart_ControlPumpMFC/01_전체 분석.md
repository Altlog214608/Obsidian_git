# 파일별 분석 요약

  

생성 시각(UTC): 2025-08-12T02:33:37.178996Z

  

## ControlPumpMFC.c

```json

{

  "file": "ControlPumpMFC.c",

  "hashes": {

    "size": 14543,

    "md5": "130eff6ae1dd4cd867c08ed55f821a62",

    "sha1": "6102114e9f97f80c3d16ae5bce41a6914003bac2",

    "sha256": "44fe50469792e2213df47a89d8075fa4718ac5012724163daa0da3ba8fc6134c"

  },

  "num_defines": 0,

  "num_functions": 17,

  "functions": [

    "main",

    "InitProcess",

    "QuitProcess",

    "InitProcess_MFC",

    "InitConfig_MFC",

    "ReadConfigProVal_MFC",

    "WriteSingleReg_MFC",

    "Error_MFC",

    "DecodeData_MFC",

    "DecodePacket",

    "C_RunProcess",

    "C_StopProcess",

    "C_QuitProcess",

    "C_ReadData",

    "C_RunTimer",

    "C_SumLineValue",

    "C_DisplayStripChart"

  ]

}

```

  

## ControlPumpMFC.h

```json

{

  "file": "ControlPumpMFC.h",

  "hashes": {

    "size": 3433,

    "md5": "352ed845e9020875bde349b08a0dd2aa",

    "sha1": "fa098825666d79b2b8a05dfec2b5f7d062c05610",

    "sha256": "0dc1ce649e6069f5aab172aa4594e5f577d987ee264e4d1f09793f69ecc311b6"

  },

  "num_defines": 26,

  "has_S_MFC": true,

  "S_MFC_fields": [

    "int tnsbd",

    "//total number of solenoid board int tnmfl",

    "//total number of multi-flow line double sumduty",

    "//sum duty value unsigned short *duty",

    "//duty valve of pro-valve unsigned short *status",

    "//status of pro-valve int *lhindex",

    "int cmdid,power,freq,runtime",

    "double fscale, offset, coeff[6], *dutyzero"

  ]

}

```

  

## ConfigCom.cfg

```json

{

  "file": "ConfigCom.cfg",

  "hashes": {

    "size": 780,

    "md5": "8483fa78a1f4096c4528609ffcf75a54",

    "sha1": "a8f23c975110d40a13131c400bd170d10c771fa9",

    "sha256": "e60f849f3dc554b272abbb8fe21289c632bdd91fe6f4d40742eb1a18c3e8c87d"

  },

  "lines": 15,

  "sample": "=====================================================================\n*** Serial Interface Configuration of Pressure Monitoring ***\n---------------------------------------------------------------------\ndebug = 0\t       // 0:normal,1:debug\nCOMport = 19 \t   // serial port number\nbaudRate = 9600    // baud rate\nparity = 0         // 0:none,1:odd,2:even,3:mark parity,4:space parity\ndataBits = 8\t   // data bits\nstopBits = 1\t   // stop bits\ntimeout = 1000     // timeout (unit:msec)\nprotocol = 2       // 0:none,1:SLIP,2:MODBUS RTU\nterminator = 0     // decimal code number, none : 0, LF:10, CR:13 CO:192\ncrc = 2            // 0:none,1:0x6996,2:MODBUS RTU\nmode = 0           // interrupt mode = 1\n====================================================================="

}

```

  

## ConfigProVal.cfg

```json

{

  "file": "ConfigProVal.cfg",

  "hashes": {

    "size": 1558,

    "md5": "f90c178d47861271fb5de4910b7004e4",

    "sha1": "eb7c8bad2ef5df2dd52eda145c9dd2c0d41fe405",

    "sha256": "4c879cc63561defd75bd15e1779d0800b405f116c70297ba0d56c9712067a8ba"

  },

  "fscale": "2.5",

  "offset": "41.0",

  "coeff_raw": [

    "41.2590, 2.4498, 13.7190, -9.1858, 1.3973, 0.6380   // 5-th order polynomial a5,a4,a3,..a0",

    "41.2590, 2.4498, 13.7190, -9.1858, 1.3973, 0.6380   // 5-th order polynomial a5,a4,a3,..a0"

  ],

  "zduty_count": 4,

  "sample": "===========================================================================================================\n*** Proportional Valve Configuration  ***\n-----------------------------------------------------------------------------------------------------------\nfscale = 2.5\t                                            // 0-100% input, full scale \noffset = 41.0\t\t\t\t\t\t\t\t\t\t        // curve fitting 0.0 @ this absolute duty value\ncoeff = 41.2590, 2.4498, 13.7190, -9.1858, 1.3973, 0.6380   // 5-th order polynomial a5,a4,a3,..a0\nzduty = 39.0, 44.0, 36.0, 43.0, 38.0, 41.0\t\t\t\t    // 1st manifold, zero flow, absolute duty value \nzduty = 38.0, 41.0, 37.0, 39.0, 38.0, 39.0                  // 2nd manifold, zero flow, absolute duty value \n===========================================================================================================\ndefault value \n-----------------------------------------------------------------------------------------------------------\nfscale = 2.5\t                                            // 0-100% input, full scale \noffset = 41.0\t\t\t\t\t\t\t\t\t\t        // curve fitting 0.0 @ this absolute duty value\ncoeff = 41.2590, 2.4498, 13.7190, -9.1858, 1.3973, 0.6380   // 5-th order polynomial a5,a4,a3,..a0\nzduty = 39.0, 44.0, 36.0, 43.0, 38.0, 41.0\t\t\t\t    // 1st manifold, zero flow, absolute duty value \nzduty = 38.0, 41.0, 37.0, 39.0, 38.0, 39.0                  // 2nd manifold, zero flow, absolute duty value \n==========================================================================================================="

}

```

  

## ���� �� ���� ���� 4V01 250707.pptx

```json

{

  "file": "���� �� ���� ���� 4V01 250707.pptx",

  "hashes": {

    "size": 91826,

    "md5": "02cd74bcc4a89dfb26b280dc606efccc",

    "sha1": "11a1e7efa0aaf264ad9038c0dcfeb4e161827fd3",

    "sha256": "c0f0409a944be99439cc896df7f6073868657bbdb8add0f0245927bc51d94be8"

  },

  "pptx_text_summary": "3 slides extracted."

}

```

  

## ScentControl-DA-4V01-Protocol-20250708.xlsx

```json

{

  "file": "ScentControl-DA-4V01-Protocol-20250708.xlsx",

  "hashes": {

    "size": 40447,

    "md5": "e26d8b41d8a75c0108530ef4bad15f50",

    "sha1": "e4231e1f965c925cc063800c57d145f0d733e8b1",

    "sha256": "01cd54ea74085746a02e64d4c5aaf6b9fb52aa9facd0bfce370563c006c0bea8"

  },

  "excel_info": {

    "sheets": [

      "수정 요청",

      "Sheet2",

      "Sheet3"

    ],

    "count": 3

  }

}

```

  

## ScentControl-DA-4V01-Protocol-20250708-����-2.xlsx

```json

{

  "file": "ScentControl-DA-4V01-Protocol-20250708-����-2.xlsx",

  "hashes": {

    "size": 23289,

    "md5": "6a550250b9ced320dc17972227de7991",

    "sha1": "bd492e4189ab130c94bfc121eca791134ee7251a",

    "sha256": "6f278f202e36dce8c340513c323022d80cb8bd837fc2d53b9322908e9ef94fd2"

  },

  "excel_info": {

    "sheets": [

      "수행 절차",

      "Sheet2",

      "Sheet3"

    ],

    "count": 3

  }

}

```

  

## Control_pump_mix.exe

```json

{

  "file": "Control_pump_mix.exe",

  "hashes": {

    "size": 204800,

    "md5": "420f2e75197b3b08c03a57bbd0577c28",

    "sha1": "e911b23eddcb06d4d0a1e89331162f4f6cbbc4e0",

    "sha256": "1dc000523281de9a6b8b6e7b42db2db7f8cbf6fcc721e913acd3e88318f67e71"

  }

}

```



## 파일별 핵심

### 1) ControlPumpMFC.c

- **역할:** National Instruments CVI 기반 UI 패널(uir)을 띄워 **펌프/밸브 장치 제어**.
    
- **주요 기능:**
    
    - `InitProcess()`에서 `ConfigCom.cfg` 읽고 시리얼 포트 활성화 → 보드 수/펌웨어 등 레지스터 조회(MODBUS 유사)
        
    - `InitConfig_MFC()`에서 MFC(다중 유량 라인) UI 매핑, 파라미터 초기화
        
    - `ReadConfigProVal_MFC()`에서 `ConfigProVal.cfg` 읽어 **보정 파라미터(fscale, offset, coeff[0..5], 각 라인 zero-duty)** 적재
        
    - `SetDutyBoard_MFC()`가 **6채널 묶음**으로 듀티를 레지스터에 쓰는 핵심 루틴 (절대/상대 모드)
        
    - 실행/정지/타이머 핸들러로 **RUN/CLEAN/STOP** 시퀀스 수행, 압력 읽기/차트 표시
        
- **화면 표:** “ControlPumpMFC.c - 함수 목록”에 주요 콜백/제어 함수 테이블 표시됨.
    

### 2) ControlPumpMFC.h

- **내용:** 명령/레지스터 맵 상수 정의, `S_MFC` 구조체(보드 수, 듀티 배열, 보정계수 등), 전역 핸들/플래그.
    
- **중요 레지스터 (일부):**
    
    - 입력(Read): `MFC_FVM`(FW ver), `MFC_NSB`(솔보드 수), `MFC_CGP`(Carrier Gas Pressure) …
        
    - 보유(R/W): `MFC_CMD`(1:run,2:clean,3:stop,4:run&clean,5:clear), `MFC_RPW`(펌프 파워%), `MFC_POT`(런 시간 s), `MFC_VPF`(밸브 PWM kHz), `MFC_SPA`(각 포트 듀티, 보드당 8워드 슬롯)
        
- **화면 표:** “ControlPumpMFC.h - 레지스터/상수” 테이블 확인.
    

### 3) ConfigCom.cfg

- **역할:** 시리얼 통신 설정(포트, 보드레이트, 패리티, 데이터비트, 스톱비트, 타임아웃 등)로 보임.
    
- **화면 표:** “ConfigCom.cfg - 키/값”에서 파싱된 항목 확인 가능.
    
- **활용:** `ReadConfigCom(&s_serial)` → `ActivateCom(&s_serial)`로 적용.
    

### 4) ConfigProVal.cfg

- **역할:** **프로밸브 보정 파라미터** 파일.
    
    - `fscale`(풀스케일), `offset`, `coeff[0..5]`(다항식 보정계수), 보드별 `zduty` 6개(각 라인의 **영유량 보정 듀티**) 포함.
        
- **코드 연결:** `ReadConfigProVal_MFC()`에서 읽어 `s_mfc.fscale/offset/coeff/ dutyzero`에 적재 → `SetDutyBoard_MFC()`의 상대모드 계산에 사용.
    
    - 상대모드 계산 흐름(요약):
        
        1. 입력 듀티(%) → `xvalue = duty% * fscale / 100`
            
        2. 다항식 `fduty = poly(coeff, xvalue)`
            
        3. `fduty += (dutyzero - offset)` 보정 → 0~100 clip → 최종 100배 스케일로 레지스터에 전송
            

### 5) ���� �� ���� ���� 4V01 250707.pptx (발향/세정 절차)

- **내용:** **발향, 세정, 발향&세정** 시퀀스 흐름도와 파라미터 구성(Period(sec), post-delay(ms), Pump Acc/Dcc 100ms 등) 슬라이드.
    
- **화면 표:** “발향/세정 절차 PPTX - 슬라이드 텍스트”로 슬라이드별 텍스트 추출본 확인.
    

### 6) ScentControl-DA-4V01-Protocol-20250708.xlsx / (…-국문-2).xlsx

- **역할:** 장치 통신/레지스터 **프로토콜 명세**. 시트 다수(각 시트 상위 10행) 미리보기 제공.
    
- **활용:** 코드의 `MFC_*` 레지스터 주소/의미와 일치 여부 검증, UI 파라미터 ↔ MODBUS 레지스터 매핑 근거.
    

### 7) Control_pump_mix.exe

- **참고:** 앞서 제공한 해시/크기 동일. 실행본은 위 소스/설정/프로토콜을 조합한 UI 제어 프로그램으로 판단.
    

---

## 연결 그림 (요약)

- **UI(CVI .uir)** ↔ **ControlPumpMFC.c/h**  
    ↔ `ConfigCom.cfg`(시리얼 설정)  
    ↔ `ConfigProVal.cfg`(보정/zero-duty)  
    ↔ **장치(MODBUS 유사 레지스터: MFC_*)**  
    ↔ **프로토콜 명세 엑셀**(주소/명세 근거)
    
    - **PPTX**: 운전 시퀀스와 파라미터 설명 자료
        

---
