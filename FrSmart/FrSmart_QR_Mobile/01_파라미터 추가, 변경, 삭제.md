

---

# 1) 라벨/값 매핑 추가 (i18n 사전)

**파일:** `PerfumeResult.jsx`  
**위치:** `DICT` 정의부에 `mbti` 라벨과 값 매핑 추가.

```diff
const DICT = {
  en: {
    labels: {
-     gender: "Gender", age: "Age", color: "Preferred Color", style: "Preferred Style",
+     gender: "Gender", mbti: "MBTI", age: "Age", color: "Preferred Color", style: "Preferred Style",
      top: "Top Note", middle: "Middle Note", base: "Base Note"
    },
    ...
    valueMaps: {
      gender: { female: "Female", male: "Male", unspecified: "Unspecified" },
+     mbti: { /* 자유: 없으면 그대로 출력되니 비워둬도 됨 */ },
      age: { "10s":"10s","20s":"20s","30s":"30s","40s":"40s","50s":"50s","60s":"60s" },
      color: { ... },
      style: { ... },
    }
  },
  ko: {
    labels: {
-     gender: "성별", age: "나이", color: "선호하는 색상", style: "선호하는 스타일",
+     gender: "성별", mbti: "MBTI", age: "나이", color: "선호하는 색상", style: "선호하는 스타일",
      top: "탑노트", middle: "미들노트", base: "베이스노트"
    },
    ...
    valueMaps: {
      gender: { female:"여자", male:"남자", unspecified:"미지정" },
+     mbti: { /* 예: INTJ:"INTJ", INFP:"INFP" … (생략 가능) */ },
      age: { ... },
      color: { ... },
      style: { ... },
    }
  }
};
```

> `valueMaps.mbti`는 비워둬도 동작해요. 값 매핑이 없으면 URL 값 그대로 보여줍니다.

---

# 2) 값 파생 변수 추가

**위치:** 기존 `vGender / vAge / vColor / vStyle` 바로 아래.

```diff
const vGender = valueMaps.gender[params.gender] ?? params.gender;
+const vMbti  = (valueMaps.mbti?.[params.mbti]?.toUpperCase?.() ?? params.mbti ?? "").toUpperCase();
const vAge    = valueMaps.age[params.age] ?? params.age;
const vColor  = valueMaps.color[params.color] ?? params.color;
const vStyle  = valueMaps.style[params.style] ?? params.style;
```

> 대소문자 섞여 들어와도 `INTJ`처럼 **대문자 정규화**해서 깔끔하게 보이게 했어요.

---

# 3) 애니메이션 순서에 MBTI 끼워 넣기

**위치:** `rowOrder` 배열. `gender`와 `age` 사이에 `mbti`만 추가.

```diff
- const rowOrder = ["gender", "age", "color", "style", "top", "middle", "base"];
+ const rowOrder = ["gender", "mbti", "age", "color", "style", "top", "middle", "base"];
```

> 이 배열을 기준으로 순차 등장 애니메이션이 돌아요. (우리가 `lang`도 의존성에 넣어서 전환 시 재-애니메이션됨)

---

# 4) 렌더 규칙(ROWS)에 MBTI 한 줄 추가

**위치:** `ROWS` 정의. `age` 앞에 `mbti`를 추가.

```diff
const ROWS = [
  { type: "text", key: "gender", valueFrom: () => vGender },
+ { type: "text", key: "mbti",   valueFrom: () => vMbti },
  { type: "text", key: "age",    valueFrom: () => vAge },
  { type: "text", key: "color",  valueFrom: () => vColor },
  { type: "text", key: "style",  valueFrom: () => vStyle },
  { type: "note", key: "top",    valueFrom: () => Number(params.top) || 0 },
  { type: "note", key: "middle", valueFrom: () => Number(params.middle) || 0 },
  { type: "note", key: "base",   valueFrom: () => Number(params.base) || 0 },
];
```

> 렌더는 이미 `ROWS.map()`로 돌고 있어서, 한 줄만 넣으면 바로 나와요. 라벨은 `dict.labels.mbti`로 자동 표기됩니다.

---

# 5) URL 예시 (그대로 붙이면 즉시 반영)

- 한국어 + MBTI:  
    `/result?perfume=1&gender=female&age=30s&color=yellow&style=fresh&top=70&middle=40&base=20&mbti=INFP&lang=ko`
    
- 영어 + MBTI:  
    `/result?perfume=1&gender=female&age=30s&color=yellow&style=fresh&top=70&middle=40&base=20&mbti=intj&lang=en`
    

> `parseQuery`가 이미 URL 쿼리를 `params`로 뽑아오니 추가 작업 없이 `params.mbti`에 들어옵니다. (현재 코드에서 `parseQuery(window.location.search, data.length)`로 사용 중)

---

## 지우거나 순서 바꾸고 싶을 때

- **제거:** `rowOrder`와 `ROWS`에서 `mbti`만 빼면 끝.
    
- **위치 변경:** `rowOrder` 배열에서 위치만 바꾸면, 등장 애니메이션 순서까지 함께 바뀝니다.
    

원하면 내가 MBTI까지 반영한 **완성 패치 블록**을 한 번에 정리해줄게!